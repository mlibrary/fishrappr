<% 
  flash_types = [:success, :notice, :error, :alert]
  has_flash = false
  flash_types.each {|type| has_flash = has_flash || ( not flash[type].blank? ) }
%>
<% if has_flash %>
<div class="flash_messages">
  <% flash_types.each do |type| %>
    <%- alert_class = case type
      when :success then "alert-success"
      when :notice  then "alert-info"
      when :alert   then "alert-warning"
      when :error   then "alert-danger"
      else "alert-#{type}"
      end
    -%>
    <% unless flash[type].blank? %>
      <div class="alert <%=alert_class %>"><%= flash[type] %>
         <a class="close" data-dismiss="alert" href="#">&times;</a>
      </div>
      <% flash[type].clear %>
    <% end %>
  <% end %>
</div>
<% end %>